# üìà CouponsWidget

–í–∏–¥–∂–µ—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫—É–ø–æ–Ω–Ω—ã—Ö –≤—ã–ø–ª–∞—Ç –ø–æ –æ–±–ª–∏–≥–∞—Ü–∏—è–º —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π MOEX API.

[–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å–∏—è](http://mrshrp.github.io/coupons-widget/)

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

### –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

```html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>—Å—Ç—Ä–∞–Ω–∏—Ü–∞</title>
  </head>
  <body>
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞ -->
    <script src="https://storage.uscinvest.ru/scripts/coupons-widget.min.js"></script>
  </body>
</html>
```

## üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### üî• –ú–µ—Ç–æ–¥ 1: –ê–≤—Ç–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± - –¥–æ–±–∞–≤—å—Ç–µ `data-coupons-widget` –∞—Ç—Ä–∏–±—É—Ç:

```html
<!-- –ë–∞–∑–æ–≤—ã–π –≤–∏–¥–∂–µ—Ç –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö -->
<div data-coupons-widget></div>

<!-- –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å MOEX –ø–æ ISIN -->
<div data-coupons-widget data-isin="RU000A0JXPG2"></div>
```

### ‚öôÔ∏è –ú–µ—Ç–æ–¥ 2: –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ

```javascript
// –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞ —Å –ø—É—Å—Ç—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
const widget = new CouponsWidget({
  containerId: 'my-container',
});

// –°–æ–∑–¥–∞–Ω–∏–µ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –¥–∞–Ω–Ω—ã—Ö MOEX
const widget = new CouponsWidget({
  containerId: 'my-container',
  isin: 'RU000A0JXPG2',
});

// –°–æ–∑–¥–∞–Ω–∏–µ —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
const widget = new CouponsWidget({
  containerId: 'my-container',
  data: [
    {
      paymentDate: '15.01.2026',
      rate: '12.5%',
      amount: '31.25‚ÇΩ',
      current: true,
    },
  ],
});
```

## ‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### CouponsWidgetOptions

| –ü–∞—Ä–∞–º–µ—Ç—Ä         | –¢–∏–ø            | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é        | –û–ø–∏—Å–∞–Ω–∏–µ                                   |
| ---------------- | -------------- | ------------------- | ------------------------------------------ |
| `containerId`    | `string`       | `'coupons-widget'`  | ID HTML —ç–ª–µ–º–µ–Ω—Ç–∞ –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –≤–∏–¥–∂–µ—Ç–∞    |
| `isin`           | `string`       | `null`              | ISIN –∫–æ–¥ –æ–±–ª–∏–≥–∞—Ü–∏–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å MOEX API |
| `emptyMessage`   | `string`       | `"–î–∞–Ω–Ω—ã—Ö –Ω–µ—Ç"`      | –°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö            |
| `loadingMessage` | `string`       | `"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö"` | –°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ                     |
| `data`           | `CouponData[]` | `[]`                | –ú–∞—Å—Å–∏–≤ –¥–∞–Ω–Ω—ã—Ö –∫—É–ø–æ–Ω–æ–≤                      |

### Data –∞—Ç—Ä–∏–±—É—Ç—ã –¥–ª—è –∞–≤—Ç–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

| –ê—Ç—Ä–∏–±—É—Ç               | –û–ø–∏—Å–∞–Ω–∏–µ                                    | –ü—Ä–∏–º–µ—Ä                            |
| --------------------- | ------------------------------------------- | --------------------------------- |
| `data-coupons-widget` | –ú–∞—Ä–∫–µ—Ä –¥–ª—è –∞–≤—Ç–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) | `<div data-coupons-widget></div>` |
| `data-isin`           | ISIN –∫–æ–¥ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Å MOEX         | `data-isin="RU000A0JXPG2"`        |

## üìã –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å CouponData

```typescript
interface CouponData {
  paymentDate: string; // –î–∞—Ç–∞ –≤—ã–ø–ª–∞—Ç—ã (–î–î.–ú–ú.–ì–ì–ì–ì)
  rate: string; // –ü—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è —Å—Ç–∞–≤–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "12.5%")
  amount: string; // –°—É–º–º–∞ –≤—ã–ø–ª–∞—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä: "31.25‚ÇΩ")
  current?: boolean; // –¢–µ–∫—É—â–∏–π –∫—É–ø–æ–Ω (–ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç—Å—è)
  disabled?: boolean; // –ü—Ä–æ—à–µ–¥—à–∏–π –∫—É–ø–æ–Ω (–ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π)
  description?: string; // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
}
```

### –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö

```javascript
const couponsData = [
  {
    paymentDate: '15.07.2025',
    rate: '12.33%',
    amount: '30.74‚ÇΩ',
    disabled: true, // –ü—Ä–æ—à–µ–¥—à–∏–π –∫—É–ø–æ–Ω
  },
  {
    paymentDate: '13.01.2026',
    rate: '12.33%',
    amount: '30.74‚ÇΩ',
    current: true, // –¢–µ–∫—É—â–∏–π –∫—É–ø–æ–Ω (–≤—ã–¥–µ–ª—è–µ—Ç—Å—è)
  },
  {
    paymentDate: '14.04.2026',
    rate: '12.33%',
    amount: '30.74‚ÇΩ',
    // –ë—É–¥—É—â–∏–π –∫—É–ø–æ–Ω (–æ–±—ã—á–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
  },
];
```

## üîß API –º–µ—Ç–æ–¥—ã

### –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞

```javascript
const widget = new CouponsWidget(options);
```

### –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ ISIN

```javascript
// –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å MOEX API –ø–æ ISIN –∫–æ–¥—É
await widget.load('RU000A0JXPG2');
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

```javascript
// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞ –Ω–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
widget.updateData([
  {
    paymentDate: '15.03.2026',
    rate: '13.5%',
    amount: '33.75‚ÇΩ',
    current: true,
  },
]);
```

### –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞

```javascript
// –û—á–∏—Å—Ç–∫–∞ –≤–∏–¥–∂–µ—Ç–∞ (—É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ)
widget.destroy();
```

### –§–æ—Ä–º–∞—Ç ISIN

- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** 2 –±—É–∫–≤—ã —Å—Ç—Ä–∞–Ω—ã + 10 —Å–∏–º–≤–æ–ª–æ–≤
- **–ü—Ä–∏–º–µ—Ä—ã:** `RU000A0JXPG2`, `RU000A0JX0J2`, `RU000A0JV4L2`

### –õ–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è MOEX –¥–∞–Ω–Ω—ã—Ö

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–±–æ—Ä:** –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ 5 –±–ª–∏–∂–∞–π—à–∏—Ö –∫—É–ø–æ–Ω–æ–≤
2. **–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã:**
   - –ü—Ä–æ—à–µ–¥—à–∏–µ –∫—É–ø–æ–Ω—ã ‚Üí `disabled: true` (–ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ)
   - –ü–µ—Ä–≤—ã–π –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏–π ‚Üí `current: true` (–≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π —Å–∏–Ω–∏–º)
   - –ë—É–¥—É—â–∏–µ –∫—É–ø–æ–Ω—ã ‚Üí –æ–±—ã—á–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
3. **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:** –ü–æ –¥–∞—Ç–µ –æ—Ç —Å—Ç–∞—Ä—ã—Ö –∫ –Ω–æ–≤—ã–º
4. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:** 2 –ø—Ä–æ—à–µ–¥—à–∏—Ö + —Ç–µ–∫—É—â–∏–π + 2 –±—É–¥—É—â–∏—Ö = 5 –∫—É–ø–æ–Ω–æ–≤

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```javascript
try {
  await widget.load('RU000A0JXPG2');
} catch (error) {
  console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', error.message);
  // –í–∏–¥–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∂–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
}
```

## üé® –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –∏ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

–í–∏–¥–∂–µ—Ç –∏–º–µ–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏, —Ç–µ–Ω—è–º–∏ –∏ –∞–Ω–∏–º–∞—Ü–∏—è–º–∏.

### –û—Å–Ω–æ–≤–Ω—ã–µ CSS –∫–ª–∞—Å—Å—ã

```text

.coupons-widget               –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
.coupons-list                 –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–ø–∏—Å–∫–∞ –∫—É–ø–æ–Ω–æ–≤
.list-item                    –≠–ª–µ–º–µ–Ω—Ç –∫—É–ø–æ–Ω–∞
.list-item.current            –¢–µ–∫—É—â–∏–π –∫—É–ø–æ–Ω (–≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π)
.list-item.disabled           –ü—Ä–æ—à–µ–¥—à–∏–π –∫—É–ø–æ–Ω (–ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π)
.elem                         –ë–ª–æ–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
.elem.payment-date            –ë–ª–æ–∫ –¥–∞—Ç—ã
.elem.rate                    –ë–ª–æ–∫ —Å—Ç–∞–≤–∫–∏
.elem.amount                  –ë–ª–æ–∫ —Å—É–º–º—ã
.elem-title                   –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ–ª—è
.elem-value                   –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è
.loading                      –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
.empty                        –°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—É—Å—Ç—ã—Ö –¥–∞–Ω–Ω—ã—Ö
.error                        –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

```jsx
import { useEffect, useRef } from 'react';

function CouponsWidget({ isin }) {
  const containerRef = useRef(null);
  const widgetRef = useRef(null);

  useEffect(() => {
    if (containerRef.current && !widgetRef.current) {
      widgetRef.current = new window.CouponsWidget({
        containerId: containerRef.current.id,
        isin: isin,
      });
    }

    return () => {
      widgetRef.current?.destroy();
    };
  }, [isin]);

  return <div ref={containerRef} id="coupons-widget" />;
}
```

### Vue.js –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

```vue
<template>
  <div ref="container" :id="containerId"></div>
</template>

<script>
export default {
  props: ['isin'],
  data() {
    return {
      containerId: `coupons-${Date.now()}`,
      widget: null,
    };
  },
  mounted() {
    this.widget = new CouponsWidget({
      containerId: this.containerId,
      isin: this.isin,
    });
  },
  beforeUnmount() {
    this.widget?.destroy();
  },
};
</script>
```
